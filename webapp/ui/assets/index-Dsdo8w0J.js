(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function i(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=i(e);fetch(e.href,t)}})();function g(){var i;const o=document.getElementById("profile-form"),r=(i=window.Telegram)==null?void 0:i.WebApp;o&&o.addEventListener("submit",async c=>{c.preventDefault();const e=new FormData(o),t={};e.forEach((f,p)=>{t[p]=String(f)});const n=f=>{var p;return parseFloat((p=t[f])==null?void 0:p.replace(",","."))},s=n("icr"),d=n("cf"),m=n("target"),l=n("low"),u=n("high");if([s,d,m,l,u].some(f=>!f||f<=0)||l&&u&&l>=u){alert("Введите корректные значения профиля");return}const y={icr:s,cf:d,target:m,low:l,high:u};if(!(await fetch("/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).ok){alert("Не удалось сохранить профиль");return}r==null||r.sendData(JSON.stringify(y)),r==null||r.close()})}function O(){var e;const o=document.getElementById("reminders-list"),r=document.getElementById("reminder-form"),i=(e=window.Telegram)==null?void 0:e.WebApp;async function c(){const t=await fetch("/reminders");if(t.ok){const n=await t.json();if(Array.isArray(n)&&o){o.innerHTML="";for(const s of n){const d=document.createElement("li");d.textContent=s.text??"",o.appendChild(d)}}}}r==null||r.addEventListener("submit",async t=>{t.preventDefault();const n=new FormData(r),s={};if(n.forEach((m,l)=>{s[l]=String(m)}),!(await fetch("/reminders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok){alert("Не удалось сохранить напоминание");return}i==null||i.sendData(JSON.stringify(s)),r.reset(),await c()}),c()}var w;const a=(w=window.Telegram)==null?void 0:w.WebApp;a&&a.ready();const h=window.location.pathname.replace(/^\/ui/,"");if(h.startsWith("/profile"))g();else if(h.startsWith("/reminders"))O();else{const o=Intl.DateTimeFormat().resolvedOptions().timeZone;a==null||a.sendData(o),a==null||a.close()}
